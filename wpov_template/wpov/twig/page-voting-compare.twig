{% extends "base.twig" %}

{% block content %}
{% set parties = post_voting.parties() %}
{% set questions = post_voting.questions() %}

<div class="row" style="margin-bottom: 20px; clear: both;">
    <div class="row">
        <h3>Im direkten Vergleich</h3>
        <table class="small-12 columns">
        <thead>
            <tr>
                <th>#</th>
                <th>Frage</th>
                <th>Du</th>
                {% for party in parties %}
                <th>{{ party.title() }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for question in questions %}
            <tr>
                <td>{{ question.question_index_readable() }}</td>
                <td>{{ question.question() }}</td>
                <td>
                    {% set current_user_vote = current_voter.get_vote(post_voting.get_id(), question.get_id()) %}
                    <a href="{{ question.link() }}" class="button small radius {{ fn('wpov_get_vote_class', current_user_vote.vote ) }}" style="margin:0; padding: 0.5em 1em;">
                        {{ fn('wpov_get_vote_symbol', current_user_vote.vote ) }}
                    </a>
                </td>
                {% for party in parties %}
                {% set party_answer = party.voting_answer(post_voting.get_id(), question.get_id()) %}
                <td data-answer="{{party_answer.answer()}}">
                    <a href="{{ question.link() }}" class="button small radius {{ fn('wpov_get_vote_class', party_answer.answer() ) }}" style="margin:0; padding: 0.5em 1em;">
                        {{ fn('wpov_get_vote_symbol', party_answer.answer() ) }}
                    </a>
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
        </table>
        <p class="text-center">
        <a href="{{ post_voting.result_link() }}" class="">zurück zur Übersicht</a>
        </p>
    </div>
</div>


{% endblock %}